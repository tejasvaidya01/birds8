!function(a,b,c,d,e){"use strict";function f(f,g){function l(b,c){var d=null!==b.nextElementSibling?b.nextElementSibling:null,f=b.getAttribute("data-media")?e.parse(b.getAttribute("data-media")):{},g=b.getAttribute("href"),h=b.getAttribute("data-thumb")?b.getAttribute("data-thumb"):"",i={};i.el=b,i.w=f.width,i.h=f.height,i.i=c,i.type=f.type,null!==d&&(i.title=d.innerHTML),h&&(i.msrc=h),"image"===f.type?i.src=g:i.html=a.theme("blazyPhotoSwipeMedia",{item:i}),k.push(i)}function m(a){var b=0;return e.forEach(j,function(c,d){if(c===a)return b=d,!1}),b}function n(a){a.preventDefault();var b=a.target;o(m(b.parentNode.getAttribute("href")?b.parentNode:e.closest(b,"[data-photoswipe-trigger]")))}function o(b){b=b>0?b:0,h.index=b,h.clickToCloseNonZoomable=!1,h.galleryUID=f.getAttribute("data-pswp-uid"),h.getThumbBoundsFn=function(a){var b=window.pageYOffset||document.documentElement.scrollTop,c=k[a].el.getBoundingClientRect();return{x:c.left,y:c.top+b,w:c.width}};var e=new c(i,d,k,h);e.listen("beforeChange",function(){a.attachBehaviors(i)}),e.listen("afterChange",function(){q()}),e.listen("pointerDown",function(){i.className+=" pswp--dragging"}),e.listen("pointerUp",function(){i.className.match("pswp--dragging")&&(i.className=i.className.replace(/(\S+)pswp--dragging/,""))}),e.init()}function p(){var a=window.location.hash.substring(1),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.hasOwnProperty("pid")?(b.pid=parseInt(b.pid,10),b):b}function q(){var a=i.querySelector(".is-playing .media__icon--close");null!==a&&e.trigger(a,"click")}var h=b.photoswipe.options||{},i=document.querySelectorAll(".pswp")[0],j=f.querySelectorAll("[data-photoswipe-trigger]"),k=[];e.forEach(j,l,f),f.setAttribute("data-pswp-uid",g+1),e.on(i,"click",".pswp__button",q),e.on(f,"click","[data-photoswipe-trigger]",n);var r=p();r.pid>0&&!i.className.match("pswp--open")&&o(r.pid-1),f.className+=" photoswipe--on"}a.theme.blazyPhotoSwipeMedia=function(b){var j,c=b.item,d=c.el,e=null!==d.querySelector("img")?d.querySelector("img").getAttribute("alt"):"",f=Math.round(c.h/c.w*100,2),g=d.getAttribute("data-box-url"),h=d.getAttribute("href"),i="video"===c.type?" media--player":"";return j='<div class="pswp__item--html media-wrapper" style="width:'+c.w+'px">',j+='<div class="media media--pswp media--switch'+i+' media--ratio media--ratio--fluid" style="padding-bottom: '+f+'%">',"video"===c.type&&(j+='<img src="'+g+'" class="media__image media__element pswp__img" alt="'+a.t(e)+'"/>',j+='<span class="media__icon media__icon--close"></span>',j+='<span class="media__icon media__icon--play" data-url="'+h+'"></span>'),j+='<iframe src="about:blank" data-src="'+h+'" width="'+c.w+'" height="'+c.h+'" class="b-lazy media__iframe media__element" allowfullscreen></iframe>',j+="</div></div>"},a.behaviors.blazyPhotoSwipe={attach:function(a){var c=document.querySelector(".pswp");"container"in b.photoswipe&&null===c&&document.body.insertAdjacentHTML("beforeend",b.photoswipe.container);var d=a.querySelectorAll("[data-photoswipe-gallery]:not(.photoswipe--on)");e.once(e.forEach(d,f,a))}}}(Drupal,drupalSettings,PhotoSwipe,PhotoSwipeUI_Default,dBlazy);
